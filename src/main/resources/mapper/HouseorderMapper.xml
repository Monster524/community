<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.monster.mapper.HouseorderMapper">

    <resultMap id="orderMapper" type="com.monster.entity.Houseorder">
        <id column="order_id" property="orderId"></id>
        <result column="order_date" property="orderDate"></result>
        <result column="order_total" property="orderTotal"></result>
        <result column="order_content" property="orderContent"></result>
        <result column="order_status" property="orderStatus"></result>
        <result column="community_id" property="communityId"></result>
        <association property="house" javaType="com.monster.entity.House">
            <id column="house_id" property="houseId"></id>
        </association>
        <association property="pay" javaType="com.monster.entity.Pay">
            <id column="pay_id" property="payId"></id>
        </association>
    </resultMap>

    <select id="list" parameterType="Integer" resultMap="orderMapper">
        select *
        from houseorder
        where community_id = #{id};
    </select>
    <select id="selectByMap" parameterType="Map" resultMap="orderMapper">
        select *
        from houseorder
        where community_id = #{communityId} and order_status=#{orderStatus};
    </select>
    <insert id="save" parameterType="com.monster.entity.Houseorder">
        insert into houseorder (order_date,order_total,order_content,order_status,community_id,house_id,pay_id)
        values (#{orderDate},#{orderTotal},#{orderContent},#{orderStatus},#{communityId},#{house.houseId},#{pay.payId});
    </insert>

</mapper>

